// ============================================================================
// This is auto-generated by gf cli tool only once. Fill this file as you wish.
// ============================================================================

package dao

import (
	"banban/app/dao/internal"
	"banban/app/pb"
	"context"
	"github.com/gogf/gf/os/gcache"
	"time"
)

// xsGiftSpecialPlayDao is the manager for logic model data accessing
// and custom defined data operations functions management. You can define
// methods on it to extend its functionality as you wish.
type xsGiftSpecialPlayDao struct {
	internal.XsGiftSpecialPlayDao
}

var (
	// XsGiftSpecialPlay is globally public accessible object for table xs_gift_special_play operations.
	XsGiftSpecialPlay = xsGiftSpecialPlayDao{
		internal.XsGiftSpecialPlay,
	}
)

// Fill with you ideas below.
// 查询礼物玩法
func (d *xsGiftSpecialPlayDao) GetAllPlayGifts(ctx context.Context) []*pb.EntityXsGiftSpecialPlay {
	key := "Special.Play.Gift"
	val, err := gcache.GetOrSetFunc(key, func() (interface{}, error) {
		res, err := d.Ctx(ctx).Order("weight DESC").All()
		if err != nil {
			return nil, err
		}
		return res, nil
	}, time.Second*60)
	if err != nil {
		return nil
	}
	data, ok := val.([]*pb.EntityXsGiftSpecialPlay)
	if !ok || data == nil {
		return nil
	}
	return data
}
