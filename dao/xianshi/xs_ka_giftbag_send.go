// ============================================================================
// This is auto-generated by gf cli tool only once. Fill this file as you wish.
// ============================================================================

package dao

import (
	"banban/app/dao/internal"
	"banban/app/pb"
	"context"
	"time"
)

// xsKaGiftbagSendDao is the manager for logic model data accessing
// and custom defined data operations functions management. You can define
// methods on it to extend its functionality as you wish.
type xsKaGiftbagSendDao struct {
	internal.XsKaGiftbagSendDao
}

var (
	// XsKaGiftbagSend is globally public accessible object for table xs_ka_giftbag_send operations.
	XsKaGiftbagSend = xsKaGiftbagSendDao{
		internal.XsKaGiftbagSend,
	}
)

// Fill with you ideas below.

const (
	GiftBagSendStateNormal = 1 // 正常
)

// GetGiftBagSendByCode 通过礼包码发放配置
func (d *xsKaGiftbagSendDao) GetGiftBagSendByCode(ctx context.Context, bagId, uid uint32) (*pb.EntityXsKaGiftbagSend, error) {
	return d.Ctx(ctx).Cache(3*time.Second).Where("bag_id = ? and uid = ?", bagId, uid).One()
}

// GetUserGiftBagSend 通过用户礼包码发放配置
func (d *xsKaGiftbagSendDao) GetUserGiftBagSend(ctx context.Context, uid uint32) ([]*pb.EntityXsKaGiftbagSend, error) {
	return d.Ctx(ctx).Cache(3*time.Second).Where("uid = ?", uid).All()
}
