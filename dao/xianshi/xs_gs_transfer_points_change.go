// ============================================================================
// This is auto-generated by gf cli tool only once. Fill this file as you wish.
// ============================================================================

package dao

import (
	"banban/app/dao/internal"
	"context"
	"github.com/gogf/gf/frame/g"
	"github.com/gogf/gf/util/gconv"
	"time"
)

// xsGsTransferPointsChangeDao is the manager for logic model data accessing
// and custom defined data operations functions management. You can define
// methods on it to extend its functionality as you wish.
type xsGsTransferPointsChangeDao struct {
	internal.XsGsTransferPointsChangeDao
}

var (
	// XsGsTransferPointsChange is globally public accessible object for table xs_gs_transfer_points_change operations.
	XsGsTransferPointsChange = xsGsTransferPointsChangeDao{
		internal.XsGsTransferPointsChange,
	}
)

// Fill with you ideas below.
// 写入积分变化记录
func (d *xsGsTransferPointsChangeDao) Save(ctx context.Context, guid, points uint32, ctype, opType int, reason, subject string) error {
	now := time.Now().Unix()
	insertData := g.Map{
		"guid":        guid,
		"date":        gconv.Uint32(time.Now().Format("20060102")),
		"points":      points,
		"ctype":       ctype,
		"op_type":     opType,
		"reason":      reason,
		"subject":     subject,
		"create_time": now,
	}
	_, err := d.Ctx(ctx).Insert(insertData)
	if err != nil {
		return err
	}
	return nil
}
