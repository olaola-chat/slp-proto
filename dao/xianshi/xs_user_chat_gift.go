// ============================================================================
// This is auto-generated by gf cli tool only once. Fill this file as you wish.
// ============================================================================

package dao

import (
	"banban/app/dao/internal"
	"context"
	"github.com/gogf/gf/frame/g"
	"time"
)

// xsUserChatGiftDao is the manager for logic model data accessing
// and custom defined data operations functions management. You can define
// methods on it to extend its functionality as you wish.
type xsUserChatGiftDao struct {
	internal.XsUserChatGiftDao
}

var (
	// XsUserChatGift is globally public accessible object for table xs_user_chat_gift operations.
	XsUserChatGift = xsUserChatGiftDao{
		internal.XsUserChatGift,
	}
)

// Fill with you ideas below.
// 获取配置的自定义私聊礼物
func (d *xsUserChatGiftDao) GetCustomGiftIds() []uint32 {
	return []uint32{320, 10, 260, 282, 104, 775}
}

// 设置自定义私聊礼物
func (d *xsUserChatGiftDao) SaveCustomGift(ctx context.Context, uid, giftId uint32) error {
	res, _ := d.Ctx(ctx).Master().One("uid = ?", uid)
	now := time.Now().Unix()
	var err error
	if res != nil {
		updateData := g.Map{"gift_id": giftId, "update_time": now}
		_, err = d.Ctx(ctx).Master().Data(updateData).Where("uid = ?", uid).Update()
	} else {
		insertData := g.Map{"uid": uid, "gift_id": giftId, "create_time": now}
		_, err = d.Ctx(ctx).Insert(insertData)
	}
	return err
}
