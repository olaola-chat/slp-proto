// ============================================================================
// This is auto-generated by gf cli tool only once. Fill this file as you wish.
// ============================================================================

package dao

import (
	"banban/app/dao/internal"
	"banban/app/pb"
	"context"
)

// xsSmallAccountDao is the manager for logic model data accessing
// and custom defined data operations functions management. You can define
// methods on it to extend its functionality as you wish.
type xsSmallAccountDao struct {
	internal.XsSmallAccountDao
}

var (
	// XsSmallAccount is globally public accessible object for table xs_small_account operations.
	XsSmallAccount = xsSmallAccountDao{
		internal.XsSmallAccount,
	}
)

// Fill with you ideas below.
func (d *xsSmallAccountDao) GetSmallAccountList(ctx context.Context, mac string, appid int32) []*pb.EntityXsSmallAccount {
	accounts, err := d.XsSmallAccountDao.Ctx(ctx).All("mac = ? and app_id = ? order by state asc, id desc", mac, appid)
	if err != nil || len(accounts) <= 0 {
		return nil
	}

	return accounts
}

func (d *xsSmallAccountDao) GetSmallAccount(ctx context.Context, mac string, uid uint32) *pb.EntityXsSmallAccount {
	record, err := d.XsSmallAccountDao.Ctx(ctx).One("mac = ? and uid = ?", mac, uid)
	if err != nil || record == nil {
		return nil
	}

	return record
}

func (d *xsSmallAccountDao) DelSmallAccount(ctx context.Context, mac string, uid uint32) {
	_, _ = d.XsSmallAccountDao.Ctx(ctx).Delete("mac = ? and uid = ?", mac, uid)
}
