// ============================================================================
// This is auto-generated by gf cli tool only once. Fill this file as you wish.
// ============================================================================

package dao

import (
	"banban/app/dao/internal"
	"banban/app/pb"
	"context"
)

// xsUserFamiliarNewDao is the manager for logic model data accessing
// and custom defined data operations functions management. You can define
// methods on it to extend its functionality as you wish.
type xsUserFamiliarNewDao struct {
	internal.XsUserFamiliarNewDao
}

var (
	// XsUserFamiliarNew is globally public accessible object for table xs_user_familiar_new operations.
	XsUserFamiliarNew = xsUserFamiliarNewDao{
		internal.XsUserFamiliarNew,
	}
)

// Fill with you ideas below.

func (serv *xsUserFamiliarNewDao) GetRelationRecords(ctx context.Context, uid uint32, minId uint64, limit int) []*pb.FamiliarItem {
	if uid > 0 {
		var (
			err     error
			records []*pb.EntityXsUserFamiliarNew
		)
		var result []*pb.FamiliarItem
		records, err = XsUserFamiliarNew.Ctx(ctx).Order("id asc").Limit(limit).FindAll("id > ? and uid = ?", minId, uid)
		if err == nil && records != nil {
			for _, record := range records {
				result = append(result, &pb.FamiliarItem{
					Familiar: true,
					ToId:     record.To,
					Time:     record.Dateline,
					Id:       record.Id,
				})
			}
		}
		return result
	}

	return nil
}
